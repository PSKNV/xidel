do not show default variable (if is the only one?)

Add a export variables to bash (possible?)

proxy??

output-format bash variables
name=value; export name;
array=(v1 v2 v3); export array; #optional declare -a array


declare -A array
array[property]=value
#no nesting? not compatible

source $(xidel -e '<td>abc</td><td>{$var}</td><td>foo</td><td>{$xyz}</td>' --output-format bash)

optimization for context less queries

better extract kind autodetection (at least trimmed for xqueryo)
--xpath2 --xquery1 --css --template parameters

FIX:
 xidel http://fordgroup.ca/links_full_clean.xht -f "(//a)[position() < 3]" -f '//meta[@property="og:image"]/@content' --download .

 xidel http://fordgroup.ca/links_full_clean.xht -f "(//a)[position() < 3]" -f '//meta[@property="og:image"]/@content' --download $url

FIX: follow urls containing # anchor reference

removed http: prefix

add download option to multipage template

add system function to pxp

fix xml/html output format with variables (currently it just prints the adhoc value)

--------

think about siblings.

Is

 ./xidel tests/a.xml -f //a     -e //title  tests/dpre.xml -f //a     -e //title

tests/test.sh nest7 [ tests/a.xml -f //a     -e //title ] [ tests/dpre.xml -f //a     -e //title ]

or

tests/test.sh nest8 tests/a.xml [ -f //a     -e //title   tests/dpre.xml -f //a     -e //title ]

?

http://xx -e value:=//. --post='name=$value;' http://www.google.de -e //g

http://xx -e value:=//. [ --post='name=$value;' http://www.google.de -e //g ]

http://xxx -e value:=// --post='name=$value' -f //form/@action


Realworld:

~/hg/programs/internet/xidel/xidel http://www.reddit.com/r/specart -f 'css(".entry .title a")[matches(@href, "[.](jpeg|jpg|png|gif)$$;")]' --download '././.'

multiple link interpretation:

~/hg/programs/internet/xidel/xidel http://www.reddit.com/r/specart [ -f 'css(".entry .title a")[matches(@href, "[.](jpeg|jpg|png|gif)$$;")]' --download '././.' ] [ -f  'css(".entry .title a")[matches(@href, "[.](jpeg|jpg|png|gif)$$;")] ]


recursion:

xidel "http://www.reddit.com/user/username/" --extract "<t:loop><div class='usertext-body'><div>{outer-xml(.)}</div></div><ul class='flat-list buttons'><a><t:s>link:=@href</t:s>permalink</a></ul></div></div></t:loop>" --follow "<a rel='nofollow next'>{.}</a>?" 



Input Stack, Extract Stack, Follow Stack

  http://something    push on input stack
  -e ...              push on extract stack, commit input stack
  -f ...              push on follow stack,  commit input stack, commit extract stack
???




Processing Context:

  - Options
  - Data source:
    - file 
    - data
    - http (url, method, post data)
    - bracketized contextes? parent context??
  - Follows
  - Extractions
  - Downloads
  
   [ -f //a -e //title ] [ -f // ]

   [ http://google.de -f foo ] [ http://google.de -f bar --recurse ] 

   http://base [ -f //a[@type="A"] --download a/ ] [ -f //a[@type="B"] --download b/ ] 

   http://base -e x [ -f //a[@type="A"] --download a/ ] -e t [ -f //a[@type="B"] --download b/ ] 

   http://base -e x [ -f //a[@type="A"] --download a/ -f wtf? ] -e t [ -f //a[@type="B"] --download b/ ] 


???????????

Parse DFS if no brackets are given BFS otherwise

 ../../../xidel/xidel http://www.example.org -f //a -e //title

 ../../../xidel/xidel [ http://www.example.org -f //a ] -e //title

[ .. ] returns list of ext-urls, like http://google.de, http://example.org



Parse arguments LTR 
Modifiers affect following command (--extract-kind css --extract .)


add --no-repetition-check

--------------------

change strings: 


x""     -  like xquery strings within a single tag, entities, {(1,2,3)} become 1 2 3

x''     -  like x"" but do not parse entities

remove "$abc;"  colon is not consistent

default to x'' in multipage template 
           x"" in cli (so you can write '&lt;' in windows, because '<' does not work (contrary to "<"))

----------------


GUI:
     
  reread template


-------------------------
    
PASCAL:
  CHANGE: Include submit/button if there is only one
  	
  TEST: mixing of url / follow objects
        
        how to handle differnt post data to different urls
        
  TODO: PUT requests!
  	
  TEST: for ' " encoding in multipage template serialization
  
  TODO: autochoose problematic when regex matches status
  	
  TEST: resolve-uri in multipage template
  
  FEATURE: allow arbitrary  $(); ?
  
  FIX:  ./xidel http://download.opensuse.org/repositories/home:/jsundermeyer/ -f "<BODY><PRE><A/><A/><A/><A/><t:loop><A>{.}</A></t:loop></PRE></BODY>" -e //title 

./xidel http://download.opensuse.org/repositories/home:/jsundermeyer/openSUSE_12.2/x86_64/  -e '<BODY><PRE><A/><A/><A/><A/><A>{(u:=resolve-uri(.), translate(concat("(tr)(td)",u,"(/td)(/tr)"), "()", "&lt;&gt;"))}</A></PRE></BODY>' --extract-exclude=u

VIDELIBRI:
  TODO: wrong user/pass check for Stb MÃ¼nchen

------------------
  
TXS: test if script can access the documents language 
 
-----------------------

delayed


PASCAL:

  <ol><li>a<li>b<li>c</ol>

GUI:

  local ignore siblings

  Clear all button
    
  
  Extend (to all siblings) 
  

  formreader
  
  short notation {3,3} instead a/ a/ a/
    
attribute matching:
   regex
  
  
  
  reload without scripts
  
MULTI PAGE

  follow with post data
  