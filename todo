
Add a export variables to bash (possible?)

proxy??

output-format bash variables
name=value; export name;
array=(v1 v2 v3); export array; #optional declare -a array


declare -A array
array[property]=value
#no nesting? not compatible

source $(xidel -e '<td>abc</td><td>{$var}</td><td>foo</td><td>{$xyz}</td>' --output-format bash)

output-header/footer should evaluate {} 


fix path for doc inside of "xidel --extract-file something" to be relative to current directory or something file

test why download fails on large files on win (does it fail? failed twice on a slow internet connection, never with my own)

better failing handling: retry on 4xx/5xx? ignore and continue with next datasource?
 

translate win internet access / from german to english

optimization for context less queries

better extract kind autodetection (at least trimmed for xqueryo)
--xpath2 --xquery1 --css --template parameters

removed http: prefix (done with download??. No?) don't create http:// directory?

add download option to multipage template

print variables defined in normal xpath extract expressions?

ignore namespace option

add $raw (or raw()) variable/function containing the raw text


Fix doc: ~/hg/programs/internet/xidel/xidel -e 'xquery version "1.0"; (<a>b</a> / doc("/tmp/so.xml"))'
 ~/hg/programs/internet/xidel/xidel -e 'xquery version "1.0"; (<a>b</a> / doc("../../../tmp/so.xml"))'
  ~/hg/programs/internet/xidel/xidel -e 'xquery version "1.0"; (<a>b</a> / doc("http://google.de"))'

latter: need onRetrieveDoc event

Xidel: compatibility options in CGI

Check for url in pxp:json

Xidel: auto json loading, e.g. xidel filename.json -e '(.).root(2)("property")'
       check for .json extension, application/json content-type 
       application/json
       application/x-javascript
       text/javascript
       text/x-javascript
       text/x-json
--------

Realworld:

~/hg/programs/internet/xidel/xidel http://www.reddit.com/r/specart -f 'css(".entry .title a")[matches(@href, "[.](jpeg|jpg|png|gif)$$;")]' --download '././.'

multiple link interpretation:

~/hg/programs/internet/xidel/xidel http://www.reddit.com/r/specart [ -f 'css(".entry .title a")[matches(@href, "[.](jpeg|jpg|png|gif)$$;")]' --download '././.' ] [ -f  'css(".entry .title a")[matches(@href, "[.](jpeg|jpg|png|gif)$$;")] ]


recursion:

xidel "http://www.reddit.com/user/username/" --extract "<t:loop><div class='usertext-body'><div>{outer-xml(.)}</div></div><ul class='flat-list buttons'><a><t:s>link:=@href</t:s>permalink</a></ul></div></div></t:loop>" --follow "<a rel='nofollow next'>{.}</a>?" 



Processing Context:

  - Options
  - Data source:
    - file 
    - data
    - http (url, method, post data)
    - bracketized contextes? parent context??
  - Follows
  - Extractions
  - Downloads
  
   [ -f //a -e //title ] [ -f // ]

   [ http://google.de -f foo ] [ http://google.de -f bar --recurse ] 

   http://base [ -f //a[@type="A"] --download a/ ] [ -f //a[@type="B"] --download b/ ] 

   http://base -e x [ -f //a[@type="A"] --download a/ ] -e t [ -f //a[@type="B"] --download b/ ] 

   http://base -e x [ -f //a[@type="A"] --download a/ -f wtf? ] -e t [ -f //a[@type="B"] --download b/ ] 


???????????

Parse DFS if no brackets are given BFS otherwise

 ../../../xidel/xidel http://www.example.org -f //a -e //title

 ../../../xidel/xidel [ http://www.example.org -f //a ] -e //title

[ .. ] returns list of ext-urls, like http://google.de, http://example.org


  

add --no-repetition-check



GUI:
     
  reread template


-------------------------
    
PASCAL:
  CHANGE: Include submit/button if there is only one
  	
  TEST: mixing of url / follow objects
        
        how to handle differnt post data to different urls
        
  	
  TEST: for ' " encoding in multipage template serialization
  
  TODO: autochoose problematic when regex matches status
  	
  TEST: resolve-uri in multipage template
  
  FEATURE: allow arbitrary  $(); ?
  
  FIX:  ./xidel http://download.opensuse.org/repositories/home:/jsundermeyer/ -f "<BODY><PRE><A/><A/><A/><A/><t:loop><A>{.}</A></t:loop></PRE></BODY>" -e //title 

./xidel http://download.opensuse.org/repositories/home:/jsundermeyer/openSUSE_12.2/x86_64/  -e '<BODY><PRE><A/><A/><A/><A/><A>{(u:=resolve-uri(.), translate(concat("(tr)(td)",u,"(/td)(/tr)"), "()", "&lt;&gt;"))}</A></PRE></BODY>' --extract-exclude=u

VIDELIBRI:
  TODO: wrong user/pass check for Stb MÃ¼nchen

------------------
  
TXS: test if script can access the documents language 
 
-----------------------

delayed


PASCAL:

  <ol><li>a<li>b<li>c</ol>

GUI:

  local ignore siblings

  Clear all button
    
  
  Extend (to all siblings) 
  

  formreader
  
  short notation {3,3} instead a/ a/ a/
    
attribute matching:
   regex
  
  
  
  reload without scripts
  
MULTI PAGE

  follow with post data
  
  
 